# add/subtract

import { Callout } from 'nextra/components'


## add

æŠ½è±¡æ“ä½œ `add` æ¥å—å‚æ•°`x(Number)`å’Œ`y(Number)`ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°å­—ã€‚

å®ƒæ ¹æ®[IEEE 754-2019](https://tc39.es/ecma262/#sec-bibliography)äºŒè¿›åˆ¶åŒç²¾åº¦ç®—æœ¯çš„è§„åˆ™è¿›è¡ŒåŠ æ³•ï¼Œäº§ç”Ÿå…¶å‚æ•°çš„æ€»å’Œã€‚è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

ECMAScriptæ–‡æ¡£å§‹ç»ˆæ˜ç¡®è¡¨ç¤ºæ•°å­¦å€¼ä¸`Numbers` æˆ– `BigInts`ä¹‹é—´çš„è½¬æ¢ã€‚

ä»¥ä¸‹æœ‰å‡ ä¸ªå®šä¹‰ï¼š

1. `ğ”½(x)`ï¼šä»æ•°å­¦å€¼æˆ–æ‰©å±•æ•°å­¦å€¼xåˆ°æ•°å­—(Number)çš„è½¬æ¢
2. `â„¤(x)`ï¼šä»æ•´æ•°xåˆ°BigIntçš„è½¬æ¢
3. `â„(x)`ï¼šä»æ•°å­—æˆ–BigIntåˆ°æ•°å­¦å€¼çš„è½¬æ¢


<Callout type="info" >
  æ³¨æ„
  - +0Få’Œ-0Fçš„æ•°å­¦å€¼æ˜¯æ•°å­¦å€¼0ã€‚
  - éæœ‰é™å€¼çš„æ•°å­¦å€¼æ²¡æœ‰å®šä¹‰ã€‚
  - xçš„æ‰©å±•æ•°å­¦å€¼æ˜¯æœ‰é™å€¼xçš„æ•°å­¦å€¼ï¼Œåˆ†åˆ«ä¸º+âˆFå’Œ-âˆFçš„+âˆå’Œ-âˆï¼›å®ƒæ²¡æœ‰ä¸ºNaNå®šä¹‰ã€‚
</Callout>

```md
1. If x is NaN or y is NaN, return NaN.
2. If x is +âˆğ”½ and y is -âˆğ”½, return NaN.
3. If x is -âˆğ”½ and y is +âˆğ”½, return NaN.
4. If x is either +âˆğ”½ or -âˆğ”½, return x.
5. If y is either +âˆğ”½ or -âˆğ”½, return y.
6. Assert: x and y are both finite.
7. If x is -0ğ”½ and y is -0ğ”½, return -0ğ”½.
8. Return ğ”½(â„(x) + â„(y)).
```

```ts
export function add(x: number, y: number): number {
  // If x is NaN or y is NaN, return NaN.
  if(isNaN(x) || isNaN(y)) return NaN;
  // If x is +âˆğ”½ and y is -âˆğ”½, return NaN.
  // If x is -âˆğ”½ and y is +âˆğ”½, return NaN.
  if(x === Infinity && y === -Infinity || x === -Infinity && y === Infinity) return NaN;

  // If x is either +âˆğ”½ or -âˆğ”½, return x.
  if(x === Infinity || x === -Infinity) return x;
  // If y is either +âˆğ”½ or -âˆğ”½, return y.
  if(y === Infinity || y === -Infinity) return y;

  // Assert: x and y are both finite.
  if(!isFinite(x) || !isFinite(y)) {
    throw new Error('Assertion failed: x and y must be finite.')
  }
  // If x is -0ğ”½ and y is -0ğ”½, return -0ğ”½.
  if(isNegativeZero(x as ESZeroType) && isNegativeZero(y as ESZeroType)) return -0;
  // Otherwise, return x + y.
  return x + y
}
```

## subtract

æŠ½è±¡è¿ç®—`suttract`æ¥å—å‚æ•°`x`ï¼ˆä¸€ä¸ªNumberï¼‰å’Œ`y`ï¼ˆä¸€ä¸ªNumberï¼‰å¹¶è¿”å›ä¸€ä¸ª`Number`ã€‚

å®ƒæ‰§è¡Œå‡æ³•ï¼Œäº§ç”Ÿå…¶æ“ä½œæ•°çš„å·®å¼‚ï¼›
xæ˜¯**minuend**ï¼Œyæ˜¯**subtrahend**ã€‚è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```md
1. Return add(x, unaryMinus(y))
```

## unaryMinus

æŠ½è±¡æ“ä½œ`unaryMinus`æ¥å—å‚æ•°`x`ï¼ˆä¸€ä¸ªæ•°å­—ï¼‰å¹¶è¿”å›ä¸€ä¸ª`Number`ã€‚è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```md
1. if x is NaN, return NaN
2. Return the result of negating x; that is, compute a Number with the same magnitude but opposite sign.
```